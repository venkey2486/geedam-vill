{"ast":null,"code":"import React,{useEffect}from'react';import{addToCart,removeFromCart}from'../actions/cartActions';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>100?0:10;var taxPrice=0.15*itemsPrice;var totalPrice=itemsPrice+shippingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){// create an order\ndispatch(createOrder({orderItems:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}},[success]);var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shipping.address,\", \",cart.shipping.city,\",\",cart.shipping.postalCode,\",\",cart.shipping.mobile,\", \",cart.shipping.country)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"Rs.\",item.price));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler},\"Place Order\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",totalPrice))))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["D:/new pro/myg/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","addToCart","removeFromCart","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","checkoutHandler","city","postalCode","mobile","country","length","map","item","image","product","name"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,wBAA1C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAE/B,GAAMC,CAAAA,IAAI,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACD,IAAV,EAAN,CAAxB,CACA,GAAME,CAAAA,WAAW,CAAGR,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACC,WAAV,EAAN,CAA/B,CAH+B,GAIvBC,CAAAA,OAJuB,CAIYD,WAJZ,CAIvBC,OAJuB,CAIdC,OAJc,CAIYF,WAJZ,CAIdE,OAJc,CAILC,KAJK,CAIYH,WAJZ,CAILG,KAJK,CAIEC,KAJF,CAIYJ,WAJZ,CAIEI,KAJF,IAMvBC,CAAAA,SANuB,CAMUP,IANV,CAMvBO,SANuB,CAMZC,QANY,CAMUR,IANV,CAMZQ,QANY,CAMFC,OANE,CAMUT,IANV,CAMFS,OANE,CAO/B,GAAI,CAACD,QAAQ,CAACE,OAAd,CAAuB,CACrBX,KAAK,CAACY,OAAN,CAAcC,IAAd,CAAmB,WAAnB,EACD,CAFD,IAEO,IAAI,CAACH,OAAO,CAACI,aAAb,CAA4B,CACjCd,KAAK,CAACY,OAAN,CAAcC,IAAd,CAAmB,UAAnB,EACD,CACD,GAAME,CAAAA,UAAU,CAAGP,SAAS,CAACQ,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACC,KAAF,CAAUD,CAAC,CAACE,GAA1B,EAAjB,CAAgD,CAAhD,CAAnB,CACA,GAAMC,CAAAA,aAAa,CAAGN,UAAU,CAAG,GAAb,CAAmB,CAAnB,CAAuB,EAA7C,CACA,GAAMO,CAAAA,QAAQ,CAAG,KAAOP,UAAxB,CACA,GAAMQ,CAAAA,UAAU,CAAGR,UAAU,CAAGM,aAAb,CAA6BC,QAAhD,CAEA,GAAME,CAAAA,QAAQ,CAAG9B,WAAW,EAA5B,CAEA,GAAM+B,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B;AACAD,QAAQ,CAAC1B,WAAW,CAAC,CACnB4B,UAAU,CAAElB,SADO,CACIC,QAAQ,CAARA,QADJ,CACcC,OAAO,CAAPA,OADd,CACuBK,UAAU,CAAVA,UADvB,CACmCM,aAAa,CAAbA,aADnC,CAEnBC,QAAQ,CAARA,QAFmB,CAETC,UAAU,CAAVA,UAFS,CAAD,CAAZ,CAAR,CAID,CAND,CAOAhC,SAAS,CAAC,UAAM,CACd,GAAIc,OAAJ,CAAa,CACXL,KAAK,CAACY,OAAN,CAAcC,IAAd,CAAmB,UAAYN,KAAK,CAACoB,GAArC,EACD,CAEF,CALQ,CAKN,CAACtB,OAAD,CALM,CAAT,CAOA,GAAMuB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B5B,KAAK,CAACY,OAAN,CAAcC,IAAd,CAAmB,2BAAnB,EACD,CAFD,CAIA,mBAAO,4CACL,oBAAC,aAAD,EAAe,KAAK,KAApB,CAAqB,KAAK,KAA1B,CAA2B,KAAK,KAAhC,CAAiC,KAAK,KAAtC,EADK,cAEL,2BAAK,SAAS,CAAC,YAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,4CACE,yCADF,cAIE,+BACGZ,IAAI,CAACQ,QAAL,CAAcE,OADjB,MAC4BV,IAAI,CAACQ,QAAL,CAAcoB,IAD1C,KAEC5B,IAAI,CAACQ,QAAL,CAAcqB,UAFf,KAE4B7B,IAAI,CAACQ,QAAL,CAAcsB,MAF1C,MAEoD9B,IAAI,CAACQ,QAAL,CAAcuB,OAFlE,CAJF,CADF,cAUE,4CACE,wCADF,cAEE,kDACmB/B,IAAI,CAACS,OAAL,CAAaI,aADhC,CAFF,CAVF,cAgBE,4CACE,0BAAI,SAAS,CAAC,qBAAd,eACE,2CACE,8CADF,cAIE,uCAJF,CADF,CAUIN,SAAS,CAACyB,MAAV,GAAqB,CAArB,cACE,+CADF,CAKEzB,SAAS,CAAC0B,GAAV,CAAc,SAAAC,IAAI,qBAChB,2CACE,2BAAK,SAAS,CAAC,YAAf,eACE,2BAAK,GAAG,CAAEA,IAAI,CAACC,KAAf,CAAsB,GAAG,CAAC,SAA1B,EADF,CADF,cAIE,2BAAK,SAAS,CAAC,WAAf,eACE,4CACE,oBAAC,IAAD,EAAM,EAAE,CAAE,YAAcD,IAAI,CAACE,OAA7B,EACGF,IAAI,CAACG,IADR,CADF,CADF,cAOE,uCACQH,IAAI,CAACf,GADb,CAPF,CAJF,cAeE,2BAAK,SAAS,CAAC,YAAf,QACMe,IAAI,CAAChB,KADX,CAfF,CADgB,EAAlB,CAfN,CADF,CAhBF,CADF,cA4DE,2BAAK,SAAS,CAAC,mBAAf,eACE,2CACE,2CACE,8BAAQ,SAAS,CAAC,2BAAlB,CAA8C,OAAO,CAAEM,iBAAvD,gBADF,CADF,cAIE,2CACE,8CADF,CAJF,cAOE,2CACE,uCADF,cAEE,qCAASV,UAAT,CAFF,CAPF,cAWE,2CACE,0CADF,cAEE,qCAASM,aAAT,CAFF,CAXF,cAeE,2CACE,qCADF,cAEE,qCAASC,QAAT,CAFF,CAfF,cAmBE,2CACE,6CADF,cAEE,qCAASC,UAAT,CAFF,CAnBF,CADF,CA5DF,CAFK,CAAP,CA+FD,CAED,cAAexB,CAAAA,gBAAf","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { addToCart, removeFromCart } from '../actions/cartActions';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { createOrder } from '../actions/orderActions';\r\nfunction PlaceOrderScreen(props) {\r\n\r\n  const cart = useSelector(state => state.cart);\r\n  const orderCreate = useSelector(state => state.orderCreate);\r\n  const { loading, success, error, order } = orderCreate;\r\n\r\n  const { cartItems, shipping, payment } = cart;\r\n  if (!shipping.address) {\r\n    props.history.push(\"/shipping\");\r\n  } else if (!payment.paymentMethod) {\r\n    props.history.push(\"/payment\");\r\n  }\r\n  const itemsPrice = cartItems.reduce((a, c) => a + c.price * c.qty, 0);\r\n  const shippingPrice = itemsPrice > 100 ? 0 : 10;\r\n  const taxPrice = 0.15 * itemsPrice;\r\n  const totalPrice = itemsPrice + shippingPrice + taxPrice;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const placeOrderHandler = () => {\r\n    // create an order\r\n    dispatch(createOrder({\r\n      orderItems: cartItems, shipping, payment, itemsPrice, shippingPrice,\r\n      taxPrice, totalPrice\r\n    }));\r\n  }\r\n  useEffect(() => {\r\n    if (success) {\r\n      props.history.push(\"/order/\" + order._id);\r\n    }\r\n\r\n  }, [success]);\r\n\r\n  const checkoutHandler = () => {\r\n    props.history.push(\"/signin?redirect=shipping\");\r\n  }\r\n\r\n  return <div>\r\n    <CheckoutSteps step1 step2 step3 step4 ></CheckoutSteps>\r\n    <div className=\"placeorder\">\r\n      <div className=\"placeorder-info\">\r\n        <div>\r\n          <h3>\r\n            Shipping\r\n          </h3>\r\n          <div>\r\n            {cart.shipping.address}, {cart.shipping.city},\r\n          {cart.shipping.postalCode},{cart.shipping.mobile}, {cart.shipping.country}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h3>Payment</h3>\r\n          <div>\r\n            Payment Method: {cart.payment.paymentMethod}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <ul className=\"cart-list-container\">\r\n            <li>\r\n              <h3>\r\n                Shopping Cart\r\n          </h3>\r\n              <div>\r\n                Price\r\n          </div>\r\n            </li>\r\n            {\r\n              cartItems.length === 0 ?\r\n                <div>\r\n                  Cart is empty\r\n          </div>\r\n                :\r\n                cartItems.map(item =>\r\n                  <li>\r\n                    <div className=\"cart-image\">\r\n                      <img src={item.image} alt=\"product\" />\r\n                    </div>\r\n                    <div className=\"cart-name\">\r\n                      <div>\r\n                        <Link to={\"/product/\" + item.product}>\r\n                          {item.name}\r\n                        </Link>\r\n\r\n                      </div>\r\n                      <div>\r\n                        Qty: {item.qty}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"cart-price\">\r\n                      Rs.{item.price}\r\n                    </div>\r\n                  </li>\r\n                )\r\n            }\r\n          </ul>\r\n        </div>\r\n\r\n\r\n      </div>\r\n      <div className=\"placeorder-action\">\r\n        <ul>\r\n          <li>\r\n            <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\r\n          </li>\r\n          <li>\r\n            <h3>Order Summary</h3>\r\n          </li>\r\n          <li>\r\n            <div>Items</div>\r\n            <div>Rs.{itemsPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Shipping</div>\r\n            <div>Rs.{shippingPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Tax</div>\r\n            <div>Rs.{taxPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Order Total</div>\r\n            <div>Rs.{totalPrice}</div>\r\n          </li>\r\n        </ul>\r\n\r\n\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n}\r\n\r\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}