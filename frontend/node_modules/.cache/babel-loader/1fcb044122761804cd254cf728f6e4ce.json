{"ast":null,"code":"import React,{useEffect}from'react';import{addToCart,removeFromCart}from'../actions/cartActions';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder,detailsOrder,payOrder}from'../actions/orderActions';import PaypalButton from'../components/PaypalButton';function OrderScreen(props){var orderPay=useSelector(function(state){return state.orderPay;});var loadingPay=orderPay.loading,successPay=orderPay.success,errorPay=orderPay.error;var dispatch=useDispatch();useEffect(function(){if(successPay){props.history.push(\"/profile\");}else{dispatch(detailsOrder(props.match.params.id));}return function(){};},[successPay]);var handleSuccessPayment=function handleSuccessPayment(paymentResult){dispatch(payOrder(order,paymentResult));};var orderDetails=useSelector(function(state){return state.orderDetails;});var loading=orderDetails.loading,order=orderDetails.order,error=orderDetails.error;var payHandler=function payHandler(){};console.log(orderDetails);return loading?/*#__PURE__*/React.createElement(\"div\",null,\"Loading ...\"):error?/*#__PURE__*/React.createElement(\"div\",null,error):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,order.shipping.address,\", \",order.shipping.city,\",\",order.shipping.postalCode,\",\",order.shipping.mobile,\", \",order.shipping.country),/*#__PURE__*/React.createElement(\"div\",null,order.isDelivered?\"Delivered at \"+order.deliveredAt:\"Not Delivered.\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",order.payment.paymentMethod),/*#__PURE__*/React.createElement(\"div\",null,order.isPaid?\"Paid at \"+order.paidAt:\"Not Paid.\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),order.orderItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):order.orderItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item._id},/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"Rs.\",item.price));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",{className:\"placeorder-actions-payment\"},loadingPay&&/*#__PURE__*/React.createElement(\"div\",null,\"Finishing Payment...\"),!order.isPaid&&/*#__PURE__*/React.createElement(PaypalButton,{amount:order.totalPrice,onSuccess:handleSuccessPayment})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",order.itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",order.shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",order.taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"Rs.\",order.totalPrice))))));}export default OrderScreen;","map":{"version":3,"sources":["D:/new pro/myg/frontend/src/screens/OrderScreen.js"],"names":["React","useEffect","addToCart","removeFromCart","useDispatch","useSelector","Link","CheckoutSteps","createOrder","detailsOrder","payOrder","PaypalButton","OrderScreen","props","orderPay","state","loadingPay","loading","successPay","success","errorPay","error","dispatch","history","push","match","params","id","handleSuccessPayment","paymentResult","order","orderDetails","payHandler","console","log","shipping","address","city","postalCode","mobile","country","isDelivered","deliveredAt","payment","paymentMethod","isPaid","paidAt","orderItems","length","map","item","_id","image","product","name","qty","price","totalPrice","itemsPrice","shippingPrice","taxPrice"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { addToCart, removeFromCart } from '../actions/cartActions';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { createOrder, detailsOrder, payOrder } from '../actions/orderActions';\r\nimport PaypalButton from '../components/PaypalButton';\r\n\r\nfunction OrderScreen(props) {\r\n\r\n    const orderPay = useSelector(state => state.orderPay);\r\n  const { loading: loadingPay, success: successPay, error: errorPay } = orderPay;\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successPay) {\r\n        props.history.push(\"/profile\");\r\n      } else {\r\n        dispatch(detailsOrder(props.match.params.id));\r\n      }\r\n    return () => {\r\n    };\r\n  }, [successPay]);\r\n  const handleSuccessPayment = (paymentResult) => {\r\n    dispatch(payOrder(order, paymentResult));\r\n  }\r\n\r\n  const orderDetails = useSelector(state => state.orderDetails);\r\n  const { loading, order, error } = orderDetails;\r\n  const payHandler = () => { };\r\n  console.log(orderDetails)\r\n\r\n  return loading ? <div>Loading ...</div> : error ? <div>{error}</div> :\r\n\r\n    <div>\r\n      <div className=\"placeorder\">\r\n        <div className=\"placeorder-info\">\r\n          <div>\r\n            <h3>\r\n              Shipping\r\n          </h3>\r\n            <div>\r\n              {order.shipping.address}, {order.shipping.city},\r\n          {order.shipping.postalCode},{order.shipping.mobile}, {order.shipping.country}\r\n          </div>\r\n            <div>\r\n              {order.isDelivered ? \"Delivered at \" + order.deliveredAt : \"Not Delivered.\"}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3>Payment</h3>\r\n            <div>\r\n              Payment Method: {order.payment.paymentMethod}\r\n            </div>\r\n            <div>\r\n              {order.isPaid ? \"Paid at \" + order.paidAt : \"Not Paid.\"}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <ul className=\"cart-list-container\">\r\n              <li>\r\n                <h3>\r\n                  Shopping Cart\r\n          </h3>\r\n                <div>\r\n                  Price\r\n          </div>\r\n              </li>\r\n              {\r\n                order.orderItems.length === 0 ?\r\n                  <div>\r\n                    Cart is empty\r\n          </div>\r\n                  :\r\n                  order.orderItems.map(item =>\r\n                    <li key={item._id}>\r\n                      <div className=\"cart-image\">\r\n                        <img src={item.image} alt=\"product\" />\r\n                      </div>\r\n                      <div className=\"cart-name\">\r\n                        <div>\r\n                          <Link to={\"/product/\" + item.product}>\r\n                            {item.name}\r\n                          </Link>\r\n\r\n                        </div>\r\n                        <div>\r\n                          Qty: {item.qty}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"cart-price\">\r\n                        Rs.{item.price}\r\n                      </div>\r\n                    </li>\r\n                  )\r\n              }\r\n            </ul>\r\n          </div>\r\n\r\n\r\n        </div>\r\n        <div className=\"placeorder-action\">\r\n          <ul>\r\n          <li className=\"placeorder-actions-payment\">\r\n              {loadingPay && <div>Finishing Payment...</div>}\r\n              {!order.isPaid &&\r\n                <PaypalButton\r\n                  amount={order.totalPrice}\r\n                  onSuccess={handleSuccessPayment} />\r\n              }\r\n            </li>\r\n            <li>\r\n              <h3>Order Summary</h3>\r\n            </li>\r\n            <li>\r\n              <div>Items</div>\r\n              <div>Rs.{order.itemsPrice}</div>\r\n            </li>\r\n            <li>\r\n              <div>Shipping</div>\r\n              <div>Rs.{order.shippingPrice}</div>\r\n            </li>\r\n            <li>\r\n              <div>Tax</div>\r\n              <div>Rs.{order.taxPrice}</div>\r\n            </li>\r\n            <li>\r\n              <div>Order Total</div>\r\n              <div>Rs.{order.totalPrice}</div>\r\n            </li>\r\n          </ul>\r\n\r\n\r\n\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n}\r\n\r\nexport default OrderScreen;"]},"metadata":{},"sourceType":"module"}